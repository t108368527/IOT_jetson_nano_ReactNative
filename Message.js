import React from 'react';
import {
  View,
  TouchableOpacity,
  Text,
  DeviceEventEmitter,
  Button,
  Image,
  Alert,
  StyleSheet,
} from 'react-native';
import {RedisClient} from 'react-native-redispubsub';
import base64 from 'react-native-base64';
export default class Message extends React.Component {
    // message(){
    //     RedisClient.redisConnect('140.109.20.33:8987', 'iotclassj6xul6');
    //     // if(RedisClient.publish('iotclass', 'test')){
    //     DeviceEventEmitter.addListener('iotclass', function (e) {
    //         console.log(e);
    //     });
    //     // }
    // }
    uri = "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAIBAQEBAQIBAQECAgICAgQDAgICAgUEBAMEBgUGBgYFBgYGBwkIBgcJBwYGCAsICQoKCgoKBggLDAsKDAkKCgr/2wBDAQICAgICAgUDAwUKBwYHCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgr/wAARCAC2AGsDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD94YMKm1jjA4odwBz0r8e/2hv+Cl37f9x8cfj1N4H/AGz/AIf/AA88P/CzxXdabpHhLV9Ks2vtYjiuZ7WKPT4pLK5nu5mNurTMzrHG1wGJii/1fF+Bf+Dhj9srSre8i+IGh+F9bP8AwjVvZac1vpRtm+3xOd1/KVcgvMjt5iKoj3RReUkI8zf8jQ41yR4yOHqOVNNtc0kuXRtNuzbSuuq+R/Rlf6L3ic8glmmC9jiXGEJOlSlU9recIVFBc9KEJT5ZptRqSS112v8ApD/wUQ/4KKfCj9h/4eT3XiPUXl168tXOmWFptMinB2ucnAGRX87n7Uv/AAUD+Ofx58V6rqniTxZem0vbx5YrKOVhGik5AwuATxzkcnNbXxu+OvxN/ax+IeueNvjjJdX2p3mrZuZlnQwoNgcCMZBRNu1cAZw4xjnb474j8OS6j4WsfDugaKoupvEVzaR30/ljekbT8syndjap7f8ALI8fd3ehU44y6jinhcM7JSSc+ZWlFxclNO+istt7WZ5kfo3cYxyKnm2IalKdKU1RVOr7WNaFWnReH5HBPn5qiXtF7jkpRvs3x938RzdOZbmQsT3fOAP8jH+NRx+MYmlL284OwFdqkkNz39TWnrHwC8aPeWllJb2TG6lZTdWs8hjhKqXBk+TKg7cAgEZwCRkZ878caBrXw61+40G9mikmtTGWktySjZjD8EqD0YdutdWCznLsyr8lCspyavo9bXt+Z8HxJ4c8bcH4F4vOMvqYekqipXnGy55Q9oorveF3daaNXuml6h8P/jR4h8Ca7DrWk6zPbyQlVSSFyHGOdwI6ev51+gPwB/4KOeOvi/Pa/DibVfs92LGKLVdYjYYlttyLIpAOPvDcOPlPoM18DfBr4a+FPFPw0h8ZeItGk1O6uXmlhhimaJlVGKCJf3iqSSjEFiPv4JAGa6f4LeHdN8LeIfEGr+HU1SyktNXmsbUXMzKyQ+Sm7GDlkbzG2lsnZsIwck+PjeOMpoyr0ZqbdJtN2T1uovlvJPfvZaOx+oZJ9F7xBznB5XjqFXDxWPgqlNSnUVoum6sXU5aMo6xS0g5yTceZJXa/ZYftM/Cn4I6/pWg/Di9sFv74RNeJ5gWPTojFOAZiPvEBgdmfXPevffD/APwVA/ZP+E1iJPGvxmsdSuZR5ky2befNvG1WZiOEUZHH061/Pf8AFDx/q+leIlstU16/mtpbYTmIXBBVyWXIbr2zznnPtU/hHxF4T8VW8s0VrdoLK3D3dzd3GFXPXJ3jOdpOcAYHbgV0wzjIsvyunj3RqzpS193lTTenv3lfVuySb126HyuC8HOLc+48xfCMswwtDGUJOH7x1XGpypyfsnGlLSMYuUnNQajq0rO39Onwg/b8/Zb+Nc7Wngn4pae0gcLHHdN5TOSONobGeuK9nt7iG5iE9tMroygh0OQR7Gv5WPhh8Z/E/wDY8t34fg+xRpdkWl6JZRM6rjn723tjIzyW5BGa+jvBv/BZD9vfwloFnoXww+Psum6XaWiQw20ui2N62Bkbme6hlbPYYIGFHGck7Zlxhw/hKdWShO9JxjJJKVnJNpXbjtytO+zstzq4U+jt4j8TYjAUoVKFOONp16lGVWbhzwoSpRlJKEKjan7WMqateUFKbSik3/Q+CD3or4W/4Iq/tA/tvftOeCfEPxj/AGn/AI26F4h8PXbraeGtIj0eyh1KKaJ2Etyxs1iWKE8p5cqPI7IHUwooNx9zguwyOhr08vxX9pYOGJhCUVNXSkknZ7Oyb0a1WuqaZ+c8YcL1uDeJsTklfE0q9XDy5JyoylKCmviheUYPmg7xmuXSScd0z8S/2+/2d/An7GXiT46fH/8Aab8DeGvEev8Ajj4ky6h8IETXbhzZ20stzez3dxbRlI5FzPbweVOrgyW83y+UVeX8r/Hv7QFr4oi03VNae5mvbbWoZbpUhUKttCdsapyAAI9qqowAIyOABn1v9sX4yftLftq/Ey/+JPxY8VadNJdP/o9ik8qwW0eAoRF2HAwAO5OOTXhlx+zj41mZpDqWlM20hFa4l2rn/tnXyWJxXA9GjHCUK8XGMnNyWjlJqS1drtJTajfZWP6Oo5T9KKvmFbMMXllZyqUIYdU2nKnSpwdF/u4Oo4wlN0ISm0rSk5u13pq2X7SPw50TXNWGoSX3l3mtRfZ5UtMjyjBHGZTzkKrREkY3YdcKTuC1vh58X/DfjfWfD2haXb3iXLeJ9Uu3W4hChImiu5EyQSMkTKMDPKPn+Etyl3+yN8Rby4aR9b0QKc/8vM2ee3+q6VBH+yF8VrK5ju9N8T6PDLBKJIJY76dGRwchgRFkEHkEdMCvBqYPgp0Zxp4q0nGybd0moOCdrK+ju+/kfouD4m+lAsyw1XG5C50adVzlGNNRlKM8TTxM4qTnJRblTUYuz5Yt3UnqdX4v8f8AwS8PNqHw9vdQ1G9h1bxLJceIDGCn2N1lRnGdilk3xqpCZbbvIbIUHyXx7Po+q+MtSufCt1eS6bLcvLBPfEmRu7Hc3zEFt2C2W243ck11dv8AscfE5Jt8viDQsfxBbmY5/wDINdfpH7Ll3b2kVpqWsWxEZ+ZoS+WHvkCvVy3MeF8lfNTxjm2tbu6bdveslo7JLTolu9T4HjrhPx08RaKo4rhqNCEJp0/Z00pwhHntS53NuUOapOo1LX2km1yxtFYfwv8AH3gDUPhhYeAvH+r6po50bU1uElsJZAL0CV5VUtEpZQGYZHByqMrZ+71enftA+CvHOlanpniLVtQ8Pq12osJrMP55hG0g7ow+1yytuGMBXCgtgmn3H7M+myBWh1UKRjIKZB/H8BVKT9lqOQAnWIieSQwbGT+FeXiHwViq8608RJSlLmVn8Mm05OKcX8TWt79lZH2eS1/pO5HleHwFHJISpU6KoT5qb5q1KEHTpQqyjVi7Uoyah7N09W5T55aj/EfxI+D3iI/2Dq+p3066ZpTJYanMrs00xCgll+Vi42qcthSd+cDaTmWXxI8Nw/C4eF9DvGjvLm5Y6g+SMpkcht38ShVx3CvkDIJqat+yN4muJ/tOn+JbHd/dlLgH24T6VQX9kz4pwsDB4i0Qc5J+0zA/+ifrXdha/B1KjGl9bbjGSklKWl1fy2bfM1tzWslsfM53lP0jM1zLEZg+H4069ejUw86lKklN0qnIrczqN3p06aowm7zVJyUpSk+Y7n4d/GF7O3j0bxE0b21tbGOCaCLLsVA2A4OMYBUcdcZPU1rw/EzTtOsxql/Bu1GedFvEjhKqkQx8yevHq2ST/dUAcXoX7O3xM0+F4b3XNJPHytHdTEk54z+6H/661tK+CfxAtHdL3VtMkjZSBieTOfX/AFfFZVqXAtatOoqyi52uk2k7NtrbZuza8l8+/K8X9K/Lcuw2CeW1KscOpKnKpCM5RclGMZJuXx04KUacmm4qpUvdtNfYf/BM/wDbntf2Uf2jrH4g6Vr082j3cQttdsIXdY7iEuOWU4BZRv2kgkbj0ya/oX+Gnx3+GXxS8BaV8QvCnii1m0/VrRZ7V2nAODwQR2IIII9RX8m+hfCvxro2oreJqWnqqkE7JnyTkdtle6+E/j98W/C3h210C18T3KR2yFVSK9cKOSeBx619FkOc8H5Rl0cEsUnGLbTbu9XdrRJWv5H5z4l+HX0gPEriqpxBjcilCtUjCMo04csLQiop+9Ocm7LVuT8rJJL5I+Otyw+Lt5YQOV8xoXlP/bBBj6cfrXH3cwup3llQbIiY1b6dT+eOuK7D45t9n+KmrXqQbnxBGD9YIz6fWuE1Frya4h0jTrctJIMFUGfmY7sfrmuvI3y5LhW9vZw/9JR+d+K0X/xFHPFBXbxuJ/8AT8zIuodR8U62ugaNblyDgmJSQcdz619F/s1fsQT668Wq+KLVnXIOxkyDwDjpx39K7H9kv9j65SKDX/EGm5dzuO8d/X+f5V9wfDf4RrpsMVqlqQqx5OB949/6AV4eccQ8zdKhKyXU1yDhVcqr4mN2+nY4z4T/ALOOieF7SJbfSIY1eIb2WEdTj27DkfWvVtE+HVjBtYmMKVC7mxknAx/L9a7bTPAhsoI45VX7uSq8D9eprWt9FgaNINmMMcDPQDgfyFfDVK9WrNt6s/RKWDhTiklZHKW3gTT7W3ysIYlepXp1zj/Csu6+HNtPIUWAHIYbipIHP69a9IaOIoVtvkI+6SOjfTvUE1lDcs805wuCAQDwf61EHO17mqw8Op4zrnwmtRGfPtYnRc7zt655PHc8GvLfG/7PXhbxFE1pe6PEysuC235m/r/ntX1NqOmwurAnk43YXrxz2+lch4i8PxRs8cSHCfx7f89v51rSrzpu97GNXC03Hlsfnl8cP2FrQQSapoUDROGLL5SHAPtjr6183eNfC3ij4b3zafqtgywiXLfIcCQAc/iOor9aNd8I29wXMkI3H5RGBjB/H+Z/vV4p8b/2X9A8f21zJLpyow5zFnGeuf8A9VfV5bxBVw1o1XzRPi844WoYy8qS5ZH58JdNNAt3Y3p+deApPBBzg49Rz+FfRfwRvZtR+F+lXdznzGWUPnrkTOP6V418X/gt4j+C3iGTT7+2dba6kLwPj5QQCcD9f19a9j+BYA+FelgAY/f4wP8ApvJWfH+Ip4nh+jUpu8XUX/pMz9r+hzh62E8WMbSqq0lg6n/p/D6njf7QU19J8XL2w02MySSNEDGi5Zv9HjwBx1JIr6S/Y2/YW1e8sIfiJ8QrTZcT4a3tnXO1MZHAzz/jXU/sw/soaJ43+LGo/GLxdtmXz4l0y3ZAQAkSIzEHvuVv++a+6vDHhLTtL01Le2t1jVI1WMcHH07c/wBK5Kud13k+HwmH0Spw5n391fgfE8V8PUF4mZ3ja/vSeMxLiuy9tP8AE4zwX8MbXQY4oY7Py1CYC8fLj9OxNelaRo3kATPGoYjpgHj/ADirtpZwnaoQox+6TgDP+f51oQ20zs6bRktwRznn/wDVXz0m7XZ0UacEhXhiS2A2segGEz071TZDLKALnaNwyAOR6/j14rUjs2a3MpU4CnORWfLARMcOR79z07jp3ppOxvyjZ7dhI8YuFKKQRLjHb689aSMCIbCeMYYrnnrQsoIK7+vqvHuc1PFCAAjnGefkXp/nNXZEmbdRK0DusxBVdoBHc+v5Z/Cud1OGTzBgsSeVwSePfNdm+jCQMc9F7KDk/wD66x9Q04BDufg4ye+OSPwpRV2JuPU4XUtMaUkvGoO0Ngdcd/04rOuvDfnq4+yHG0HBA7jOMde3b8a6nUbJUbcJVKkL8rjLAYOenU8YqGEmExh1Vcj5GIHB5rflklojgrTp3PCv2h/2RLL45eCptKtLcC825tpigBR88H3B6GvmDwv8O/E/wm0cfDrxla+TqWlXE8VzHnPWZ2U/irKfxr9J9IuorC7EjDcDyQH5P+PbnjpXxr+2PcJd/tI+JLiOMKHa0O1emfskOenvXn55VxH9lxpOV486dvO0v0Z+7fRkhQn4lYmqo+99UqK/de2of5Hqv7I1mB8P7S7bndPIAQpymJHx0Pr/AF6V9C6dMhiAa5VVyeVHTp0/Ejj2rwb9llUtvhJpLmYqJvtJyTn5hPIMfkBXp9/44tdItGaWflR+7BPCnjBJ/D9a9LCU5VcJSS/lj+SPyvxAkqPHebSb/wCYrEf+nZnfQ6mhYJNsK9ASfvZH8utb1ldwrEhj5+TA56dP1r5O8bftUR+HJJ3v7wgRgeU6A4Xrzx16HHp614/rP/BVDUtNHkaDpRnCMPMkkfnjrgZ9q9uhw9i8RHmjZep+e4jifDYaVuVv0Vz9Dpr1TC1uZNwYfMNxBB46f/WzWTPcJHKZfOVArYBJzk/l+HSvgrRP+CpPi++8mW58OEW5O2RSDv8AXOMY74r1fwj+1m3i+P7VcSeWkkgCbT1yoI/Hn8qnEZJXw3xNfJ3OvB8SUcVZRi16n059sgIUB+mDgEH8e3+fpTpdatreIBpA7KMkBiP1+leXeH/id9vtvPluElVsYbZggdcgdv8A69Y/jD4ivaRyGO5ZsZJGTx7ZHb3rgjhEp2PSljHy3PT9d+Jmi6VEbq4uljVSSN56hcknj/P615h48/a4+HukSv8Aa/EMEIjGJAxAP+fz7V8y/G74r+MfFTS22l6i68bIEjyACG9fx6V4Pf8AwQ+JPi2/lnvNRuJkd/3BkY/MvQDB+pNe1h8uy6MeavL7j5zH5nms5cmGj82fckn7Ynw31holsdYtmVVwskcw+c55zn3PbP0rf8OfHLwR4phQW12MBSDJH8wGSQM8+ua+D9N/Yz+JbyfbodSLRgZ2ZO4knA5HSum8I/CX45+EpVa21y1tkSQbYpQSwYepHH+fat6mFySorRm0zy6dbiSlL95FNP0Pv/Tb5JlJgZjwG39iMf5/yK+SP2sv+TgNe57Wn8Wf+XSHvXoHwG+LXiY3y6H4t0wcABpYmwM+gzxwRz+deb/tPX39pfHHW73++LXv6WsQ/pXxPEuGdDBLW65l+TP6o+iviHX4/wATzRs/qs//AE7QPYPgPqT6Z8DNGeLeXf7SFZOdv+kS9vzrP1mw8X+J4pFub5oI5GIiGOWUjgEenA5z6cVp/s/Q+f8AA/SN8nKNcNHnPH+kS/5/GmajrCwSObolYwGzu/hx9Pwr1MtnKGCpKLt7sfyR+WeI8Iz49zZyV19Zr/8Ap2Rz8f7Pem+IpC2q3T3btF+8lcAL3OAvbr071Xn/AGN/hTbWvmp4TRpAP3koi27s+p+n5elZni39qDRvh3YPqGs66mm2W7FrBGge8u2GSdin7o98dq8t+I3/AAUYu/CxfTrj4banBmEPBJqWpskpRvutj0r2qWAzHGSXLJ/N2Pz+rmmVZfF+0ht2V7Hf33wF8EWErWlrpQVFJ2KqgdfXj2/SrEvgzS7a5Nv4as3jijChAH5U+ueew6V5R8NP21NH+KN6U1TT7ixUfu/tU53IrEnaN3HBx/Fzz1r2zwrc3dxeCUTB0cD5geAOuf8A9VTicPisG+So7P1NcHisHmMVUpLR+VjuvAdlqMOm+RnzDGecr146nn0/Cs7x7a6w1m0kp2dcEDIycEnnr0HFeu/CvwlaavYLM6gSBQSoOOM8e/esz47+GRoehPOsIAETZ4zn/Oa8pYiXtVFnuOjBUrpHzEdEtnvmdlG4yfeIwBnv9a7Pwro2nSyBmhUYI2gjtnqOfrXM6Jo+ra/fiGK3ZYS5ydmM4PX69f0rgPin8R/ij4m0bXdK+C032Ww0S0Z59SZMyXjq2JPJz2A3YPOSK9ONFYn3XOy7s8ivXlhYupGLk+yPpG5uNN0yxKokanZzGpGT07k+9cprevaYb1YpPllD/u9+Bk4OT0571+fMHjz4wfEDx3ZaPqPirWx5l2kU5N22TucA4PQAcmvWrvx58ZfhTqjeHb1Ljxdo0igB5YyZogcfdYZOf8Ogr0KmTYahJKFZN29F954FPPsZi0+bDuKXZ6/db8j658I63og1aO3vrcNkg712jAzkkjpjivH/AIveIdN8U/EbU9b0i4EttJIiRSD+IJGqE/mprAufi3LY+ArvW7VLqC4dNlstyuCGIO3J744Pvj3rB+H0s8/g+zuLkkySB3ckdzIx/rXyfFWGjRyiL6+0X/pMj+m/op13PxLxMNf90qPX/r9hz7D/AGZbX7Z8HtIidjgi5GB/18S+39e9anxE+EGo+IdOMGj3LWylR5kigZ75xnv1xn2qj+yu0EPwl0e4uMgIbg8H/p4l59zzXs8FrFdRx79pjYnHAyD6En8K58NOpHCUrP7MfyR8Zx1CE+PM25lf/aa//p2R8Y3P7FXhy28Xf8Jh4r126v7yNh9nNzKWWHA6Lzj1/wAKzvjx+zD8Pfipqdrq3iy5lWe2hMDSWM6JmMEsAwZTnk8ema+1de+F+h6rbOLi0AUg7XU428dcj/Jrz/Vf2afDWqXn79J2Ln5B57ZOBXq0sxqqzk5XXn+XY+Nq5XSkuVRjbtY+VvB3wV+B3gbSX8KaTpLm3mceZK1zveXGQB6dT6AV9AfB34dRR6NZ2ulwXC29sm2D7SrF9nYc8kDgD2xXovhj9nHwJ4dZLp9LgyRwGBb88+/au703QrGxsxbQRiNOMleNv6/y5rOtip1lon83c1oYGNNpL8FZfIqeCLddAu1U3TIH4C9Bnpjn8Kyv2k7dpPDDs74wvzAEcAgZP5V0zWMC34e2kVog/wAjHvz2H51h/G61fVtGaOUmRlU4UAlSOBkjvx/niuWnJ86T3PQdH9yzwzw/4cmuNLaw03hZYzhlxwD26fWsHW7XX/BVuLGz8GW01lECoNnCA44xyOh+leheFVexg8lzlRJ1wOBitmTTYb+28poRtYZCMck/h+H6mvQjJ03zLW3RnkSoKa5dn5M+Udev9Fi1P+0Lnwg9ncK5cyxaeqtg+h256E8+4rd8Jz2txGLnR/B0z8ZeaWH7wzk9evb8q9/uvhpp+oDzoFRQ5DD93054P45aqXiXw9pPhHw/damUiKwxEDIwCwB4J9Mj8q0lio1EoKC/E56mBVOLnKT09D48/ao1eK9119OtWAgtyttGEQYZ8Bn5HXGAv51T8DQ+R4VtIgCMB8ZH+21Y3xS1U6x4g3iARhVeVsPjbJJ8xBOe2env9K3PBz7/AA1aNgj5COTnoxFcXF0VDI6UUre+v/SZH7L9E+XP4p41/wDUJU/9PYc+uP2ZZGj+FOjurbgTcKyY4/4+JD+PX/OK930dsW6L8uR94sAD74HT/PtXzZ+zr4gWz+Hthpssg2sZsZI4PnP+Pevc/CetQtbqrSqxVRjnOc8gD8P51zYanfB0r/yx/JHy/GtRf6+5sv8AqKxH/p2R6TDawSWe5GOWAO5gOM//AKutQNDDK7+TagFCRllHQ88Z+tU7fxRYAL9slGSOfUe3vWX4s+KGk6VbhIJowSuW35OB6k1tHDzbVjxZ1oRWpvxadaBCl4YyD6nseT3/AB/Cq17rHhO122MmoosjZ+Ved5z+Q+leE+P/AI+avqN2umaHuKz4QPE3AAOMnPp/Wuw+B2gWWtaEfEuu3bPeSM23zpDhBntn6VrUoRpR11ZhTxDqyvHRHpWki3n1FJIyPLAGMOTj0/QVS+IkEd7pMsTu4/2AM59qzLn4h6H4Vdraa7jfap+VRwD26dOlcJ8Svj7pdvbzCGZQjId5A568DHJ6U6OElVfNYivjqcI2uYesXv8Awjt480Fu06MPlZRz6j/CmeG/jT4eutUOmMrwywsQ6yDaSRkcdDXE6N8d/DOoart1vU4xAjN8xbG4nqOc/n6muS/aS8V+B73T7DxV4J1dfta3XkzeQwIdWBweO4I7etdsMNVhLllH3X1PHqY2jOLcJrmXTufSkfjDQ7hTLb3a4R+MDjv2/SvKP2ofHz2XhG502wlVBckpuJ4UDLyNx2CAr/wP2rzf4a/Ga5uLCOKeciUYXbuHzds47HvmvMv2lfizcajfizivG2qjWyKWyHLY3kg9OAQfw6104fAr2/kcGPzKMMG2t2eYeLdcgvdV81WH76X5NydsZHQDt/Wu38EEnwxbZxwZANvTG9sV5dqt6yXYl3qrR4UoOfmOB6deSPwr1Pwc6SeGrSSOTerISreoLGvO44go5TTt/Ov/AEmR+1/RElzeJmL/AOwSp/6ew5798FLa4TwFAiTB/NZ54+f9UfMZCpx0yFz+Nep6N4ok03y4ZiB8gydoxwBwM9uvtXp3w5+AXhfVP+CS/gv40eHvDFvFrWnatfT65fxRYkubVtTubY7yBltgEOPQKcV4rrLKIo5Vn3fuwADkHGOo/L9awwKksDSU19mL+VlY+K44xlOrx/nHJ0xeIT9VVkjptY8c+REHYhQYyNxI+Qd8e30rzbxx8Qbu9mFpp4LE9AVOck8gfXB/Ok1S9uXQwrcOW3ERqTgE46c1P4a0a002eO9vwj3EkoBYnOB3x6Hj6967OZRjpufOOo5r3noWvhp8ObyOGTXtVt2F1MA0Snll69F65pnxEt/i/Y+E7rT/AIe6mLaZhwr8L83JKkD6n35rsbbxDpttOirKqKoORxgfrWimpHXSVFoXDjO3GAo49+vH69qKftKbU09V31KnKlKDg9j5E0m4/aa8OanJqXjLW7y+ty5MsM6jAH+wy9Ovv0rA+KnxW1wJ9mbUWBAEmwTHJ9MdeR+uK+w/E3gawvNPczyxxFF24mdRnnuDxjPFeR3v7Pmi6lqMk+rxQFWLZlYDAHGOT0/z1rthmFTnUq0bv0sebUy6E4ctJ8q9bnxZqtp4v8aav9snkunAbdFFlkijxzwB1Oe554r2H4S/DfxTdWvn+Kbhj5YysRHyqvrz1OM16trHgz4W+GNSMMXiCy3RAqESQEKcdOP6frTbnWvCunQgaZqdswEfHlOOw4P5Cuypi8RXhZRaR5lLL8Ng6jk5XfqY+vaZY+GNKe7t0VZ4oGJcMBvbgAccckge2a+f/HXiCe/8UyuygJZbkcMANzf3sdzkf57+3eLfHumXMUKMUEccokfjnCZcD3BKqM/rXzJ4y1m5ttSmjugBczsu9iMhS2WPUY6/1rry+k4t8yPGzvFxqxUYss6zft5MN5jd/pYJ3jg4IPTH+c17b4RCr4ctY0QKEQqQFxyCQeO1eA6xMscOmWwhO6SXDsRxztPX8vzr3X4c3ZvvBllclwxIdSR0yJGH9K+b48X/AAk0/wDGv/SZH9F/Q8lfxMxi/wCoSp/6ew5+xn/BN34hfA3Vv+Cc3h/4L/EH4maJYS6jp2s2l9Z3l8iSRLNqF3tyGIwcMrD6g18WeJtGufDmtXvhl76C4exu5IRcWkivHLsZhlGH3lbAIPoeK90/Ya/YC1r45/skeGfiTp/xfm0+XUJbz7NpaWaokax3txEQZsM2S0ZbIAxuA7Vwv7U/wG8b/s5+O7DQfGmiPb2+sWskun6mdUN3HeNGwDrvKqUZQ8Z2kdDnJ5q6bws8qwzgpKXJFO+z91bfoflHGVXE4fxSz2M5JxljMS1bdfvp7/qeWvDBK3lRA7933xnIfk59hVuKMmRCFaQKrbWJ4+vfPT8BVJrl7UknaqqTnDcY/Pt+fNKL7YD5SFmyMqM8+3B+tYbGcKqnE88+K83x61q7c/CjTI50UsVN9IVU9unpgde1YWg/ET9rK4L+Gr/QrbTbiJioC3hXfkkZU45zjrX0R4FvxZfvJrNcMcEg/Mo/E/T86r/ELwjpviB/7QtgBImcSQnayn3weg9ufQ1rTx1WnHltGy8tTow2Dwc6ynUv9+h8/alpv7S8tuzXt5bPL0Cy6gSRn1J6jnNch4jtf2lZLb+wLNoNkzr5twly23PuPrXtOueMdZ8MQ/Y9S1qCaCLBEk8QyOMD5u+MetcZ4j+PnhzTbd7e21WATPJgRwwjj8+cc/8A6+ld0J4ypbkafyPWrUMgpU/fdvLmPBvGvwt+Nljm41LVbNUAyWikY8/U/Wsjw54D+L/iC8bSNPuky3yfaAx2xn1PHP0r0648VyeNL0FruaVFfEmPlAz24/Pn0712PhGBtHjiIiWKKQAMFALHPORnPbv7V2vGYqFPlbV/Q+Tx2GyyrWcqUXb1PMNe+FWueBtGu7fU9aN7Ja6cGlmbgsWHJ7fl2/GvDvEl0954qu0Ug7ZjtI5xljj17f0r6g+NV+W0jVJJn3MNP4DL29eD6464r5SmkeC5mv3Jz522PYOp+bA9+h/ya7svlKac5O58Xm6jCqlFWRr+JL9xaJcySKTb3T+WHGeW+Ufl/iegr3L4JT/afhjpk5H3vOz8uP8AlvJXz7rDi4sVDOdzYduMAEdcfhn8hXvfwCdpPhJpDsTkifOSP+e8npXzPHqSyeH/AF8X/pMj+mfodST8TcYv+oOp/wCnsOfuP/wSy8SaB4Q/4J0+DfE/ivWrXTdNsIdWmvL++mWKGCMapeZZnbgD61+d3/BYr/gvxZ+OLp/gD+yRoenz6PbO39peMdY01ZZbz5sFbVXGYYjjHmcO3baOvy1+0N+2P8dPEvw30b9lKfxVJZ+BvCXmG20myzGt7NPK900k5z+9YNOyqDwoUcZyTB/wTd/4JoX/APwUK+OGr+KfHms3Fh4J8NTxf2zNaqA9wxGI7aNjwGYKzE87RyRlhn67JqeXYLh+hWrR9pJ04aWuleK0SenN3b0R/PPil9ex3irndKEuSMcbiutm7V56trW3kj2f4AfHXTvj58KbL4kx6XLYhrlrC9jaIiJLtEVnRJDwww6t9HHFegaHqzW9yk8LKfm2ktzjjBr6c+MX7OPwO+En7Pv/AApz4OeArPTPD9jfJLHa2yD559oV55HbLFjwC2c7vL7Dj5H1rTtT8B6sqyLJcWYU+UwAYj2b6Z6+1fMY2kniH7nLfVLe3kd+V4uc8Ipczko6N2te1tT0bR1AQyQnduPzK3PzflW3bx3mx/Kxgrn5yMYI7fh2/wDrGuP8A+MtL1lkguWVER8Ak8njk/57+teoaRHpiQqXaJlx91W6Z6dOnFeVXjOM7WPpcPXp1VdM8k+IPgLT9fjljvtNVzISSdmQBt/wz+deW3nwM8PrmWHw7BFtYMpZPm98V9X6vFpIj2tBFkt8yDHyn246VxfiGLSxFIYcfO2FxGPlI9P/ANdOjWqxib1fZ9WeAw/DOz09xJp+njBbqFAwMduMZ/Okm0e70W1EmVJzhUU/dA9PX+dei6/qOmacBO78scALjn2GPpXAa94gtZlMMhGFPyhTnGOvXHNelR9pJHkYmpSpq55b8VIrzVdNmjSXy0uYmiIY8AYz/P8An7V806ij3Vz9ngOYUkKLJjhzjn8ck/pX1T8Rp47rQ5Z7SVV+zRlxIer5+U/oQfwNfLVvp8tqb+GObEtrdCXDJndtY5OM8j9a+hy+6g0z4jN3GdVOOwuowBIHtl25jz+86lsgc/nmvdv2fCx+EOkbxgj7QCMf9PEleGXrqJzCQVDltxBHflT+QavePgTH5Xwr0tMYwbjg/wDXxJXzPH3/ACJ6f/Xxf+kyP6Y+h1p4n4xf9QdT/wBPYcxfiD8IfFPirxTd63pt5YLFNs8tZ55FYbY1XkBCByD68flX3R/wTn/bG+Bn7Ff7LFl8H/EPhHxBeeJXv7u/1q/0uyt3tp7mRiEYNJOjsFjWJcFB938SUVzYTNcfHLcPBT0jGNtF0SXY+g4t8POD8ZxnmmJrYa86letKT56iu5VJNuynZXfZJHT/ABl/4KH/AAe8ffD+Xwv4d8M+KI7uSeORpLy1t0RwCHZSVnY8ukZ6fw14z4n+PXw91+Fol0jVlyDgtFHx6c+ZRRXBjsxxk6iblr6L/IMs8O+DqVOUY4XT/HU/+TOOi+Iem6VP9q0BLuJ85w6KAevXDc11+j/tMwWFoIZ7G7LknzGRV+b0/iBoorJY3EzjrL8F/kdH/EP+EYT93DW/7fqf/Jj7n9puxljwunXrMTkl9v8A8V+Hbiuf1z45XGqgosE+CMZcgEZPJ4NFFEcZiE9H+C/yH/qJwr/0D/8Ak9T/AOTOV1Xx1r96pitmjRd3ylskgHqP5fl71zUy+Ib2QveXEAAGVWNjjd+VFFdtLMMXFaS/Bf5HBV8PuEakvew1/wDt+p/8mMuNMvb2y+w3UsZQMpwCSDgg85Ht/nNefat8BNSl8T3eraVdWS21xuwk0rhhkEdAhHoevWiirpZrj41NJ/gv8jmreG/BcqeuF/8AJ6n/AMmY13+zb4zmgMaarpZbYAu6eTAx0/5Z/wCcmvTvht4a1Lwh4JsfDmrzQyXFsriR7diUOZGYYJAPQjtRRXk8TY7FYrL4xqyuuZPZdpdkfrvgJwhw7kHGVfE4ChyTeHnFvmm9HUpO1pSa3S6XP//Z";
    constructor(props) {
        super(props);
        this.state = {
            image: "",
            name:"",
            prob:""
        };
    }
    componentDidMount() {
        //接收資料 訂閱iotclass 並decode出照片
        RedisClient.redisConnect('140.109.20.33:8987', 'iotclassj6xul6');
        RedisClient.subscribe('iotclass');
        DeviceEventEmitter.addListener('iotclass', function (e) {
            if(e){
                // const name = JSON.parse(e).name//名稱
                this.setState({
                    image: JSON.parse(e).image,
                    name:JSON.parse(e).name,
                    prob:JSON.parse(e).prob,
                }); //照片
                // Alert.alert(<Image resizeMode="stretch" style={{margin:10,width:200, height: 200}}source={{uri: `data:image/png;base64,${this.state.image}`}} />);
            }
            // Alert.alert(name);
        }.bind(this)); //如何解决Uncaught TypeError: this.setState is not a function？ https://blog.csdn.net/csdn_haow/article/details/56677161
    }
    led_on(){
        RedisClient.redisConnect('140.109.20.33:8987', 'iotclassj6xul6');
        RedisClient.publish('iotclass_led','on');
        Alert.alert("LED on");
    }

    led_off(){
        RedisClient.redisConnect('140.109.20.33:8987', 'iotclassj6xul6');
        RedisClient.publish('iotclass_led','off');
        console.log("LED off");
    }

    render(){
        // return <View>{this.message()}</View>
        return (
            <View style={styles.container}>
                <View style={{margin: 10}}>
                    <Text>{this.state.prob}</Text>
                    <Text>{this.state.name}</Text>
                    <Image resizeMode="stretch" style={{margin:10,width:200, height: 200}} source={{uri: `data:image/png;base64,${this.state.image}`}} />
                </View>
                <View style={{margin: 10}}>
                    <Button onPress={this.led_on} title="開啟LED"/>
                </View>
                <View style={{margin: 10}}>
                    <Button onPress={this.led_off} color="#FC0000" title="關閉LED"/>
                </View>
            </View>
        );
    }
}
const styles = StyleSheet.create({
    container: {
      flex: 1,
      justifyContent: 'center',
    //   margin: 10,
      backgroundColor:"#545454"
    },
  });